# 测试文件说明

## 测试文件列表

### 核心功能测试

1. **test_connection.py** - 设备连接测试
   - 测试设备连接
   - 测试连接重试机制
   - 测试获取设备信息

2. **test_screenshot.py** - 截图功能测试
   - 基本截图测试
   - 保存截图测试
   - 连续截图测试
   - 截图格式验证

3. **test_click.py** - 点击功能测试
   - 坐标点击测试
   - 元组坐标点击
   - 连续点击测试
   - 边界点击测试

4. **test_swipe.py** - 滑动功能测试
   - 水平滑动测试
   - 垂直滑动测试
   - 对角线滑动测试
   - 不同速度滑动测试
   - 向量滑动测试

5. **test_long_click.py** - 长按功能测试
   - 基本长按测试
   - 不同持续时间测试
   - 不同位置长按测试

6. **test_drag.py** - 拖拽功能测试
   - 基本拖拽测试
   - 垂直拖拽测试
   - 对角线拖拽测试
   - 不同速度拖拽测试

### OCR相关测试

7. **test_ocr.py** - OCR识别测试
   - 基本OCR识别
   - 区域OCR识别
   - 单行文字识别
   - 连续OCR识别

8. **test_ocr_locate.py** - OCR文字定位测试
   - 定位屏幕文字
   - 定位并获取点击坐标
   - 定位多个文字

### UI元素测试

9. **test_button.py** - 按钮检测测试
   - 按钮创建测试
   - 按钮检测测试
   - 按钮点击测试
   - 检测到按钮后点击
   - 多按钮检测

### 工具函数测试

10. **test_utils.py** - 图像工具测试
    - 图像裁剪测试
    - 区域偏移计算测试
    - 随机点生成测试
    - 颜色获取测试
    - 图像加载和保存测试

## 运行测试

### 运行单个测试文件

```bash
# 进入虚拟环境
source venv/bin/activate  # macOS/Linux
# 或
venv\Scripts\activate  # Windows

# 运行单个测试
python test/test_connection.py
python test/test_screenshot.py
python test/test_click.py
# ... 等等
```

### 运行所有测试

```bash
# 运行所有测试
python test/run_all_tests.py
```

## 测试前提条件

1. **设备连接**: 确保模拟器/设备运行在 `127.0.0.1:5565`
2. **ADB可用**: 确保ADB命令可用
3. **虚拟环境**: 在虚拟环境中运行测试
4. **依赖安装**: 已安装所有依赖 (`pip install -r requirements.txt`)

## 测试结果

每个测试文件都会输出详细的测试结果：

```
============================================================
=================== 测试结果汇总 ===================
============================================================
设备连接: ✅ 通过
连接重试: ✅ 通过
设备信息: ✅ 通过
============================================================
===================== 总计: 3/3 通过 =====================
============================================================
```

## 注意事项

1. **OCR测试较慢**: OCR相关测试首次运行会比较慢（需要加载模型）
2. **设备状态**: 某些测试可能会改变设备状态（如点击、滑动）
3. **网络依赖**: 部分测试可能需要网络连接（如OCR模型下载）
4. **屏幕内容**: OCR测试结果会受当前屏幕内容影响

## 自定义测试

您可以根据需要修改测试文件中的设备地址和测试参数：

```python
# 修改设备地址
device = Device(serial='127.0.0.1:YOUR_PORT')

# 修改测试区域
area = (100, 100, 900, 200)

# 修改测试文字
target_text = '您要查找的文字'
```
